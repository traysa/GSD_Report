\subsection{Communication}

To reduce possible platform limitations the server communicates with all other devices through the TCP protocol, structuring the data in a JSON string.

The server works with two different structures:
\begin{enumerate}
\item Commands, and
\item Data Deliveries.
\end{enumerate}

\subsection{Commands}
The command structure is used by the devices consuming the server's resources. The structure is very simple as it consists of the commands name which it wants to invoke and a sequence of parameters which each consists of the parameters name and value.

A generic example of a command can be seen in figure~\ref{fig:generic_json_command_example} for comparison the command "setExit" is shown in figure~\ref{fig:setExit_json_command}

\begin{figure}[ht]
	\centering
	\begin{lstlisting}[language=json]
	{"command":"theCommandName", "param": [{"pame": "paramName1", "value":"paramValue1"}, {"name": "paramName2", "value":"paramValue2"}, {"name": "paramName3", "value":"paramValue3"}, {"name": "paramName4", "value":"paramValue4"}]}
	\end{lstlisting}
	\caption{Generic JSON command example}
	\label{fig:generic_json_command_example}
\end{figure}

In figure~\ref{fig:setExit_json_command} "theCommandName" have been substituted with "setExit" and the parameters have respectively been substituted with "room_id" and "4ef9ad6e-5da3-4a2e-aa12-b32f70f3900e", "x_coord" and "5", and so forth.

\begin{figure}[ht]
	\centering
	\begin{lstlisting}[language=json]
	{"command":"setExit", "param": [{"name": "room_id", "value":"4ef9ad6e-5da3-4a2e-aa12-b32f70f3900e"}, {"name": "x_coord", "value":"5"}, {"name": "y_coord", "value":"470"}, {"name": "is_exit", "value":"true"}]}
	\end{lstlisting}
	\caption{setExit JSON command}
	\label{fig:setExit_json_command}
\end{figure}

There are x commands in total:
\begin{description}
\item[getRoomStatus]
\item[getRoomsAvailable]
\item[checkPredictions]
\item[checkProbabilitiesToExits]
\item[setExit]
\end{description}


\subsection{Storage}



